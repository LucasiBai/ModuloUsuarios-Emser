<!-- Delete Item Asker -->
<app-ask-for-delete
  [title]="askingForDelete.title"
  [id]="askingForDelete.id"
></app-ask-for-delete>

<!-- Field Editor -->
<app-field-editor
  [title]="title"
  [item]="editFieldsOff"
  [fields]="fields"
></app-field-editor>

<!-- Field Upload -->
<app-field-upload
  [title]="title"
  [createFields]="createFields"
></app-field-upload>

<!-- Errors -->
<div
  class="alert alert-danger mt-1 mb-1"
  role="alert"
  *ngIf="isCurrentUserError"
>
  The user<b> cannot desactivate</b> his own account
</div>

<div
  class="alert alert-danger mt-1 mb-1"
  role="alert"
  *ngIf="_isNotSuperUserError"
>
  <b>Only superusers</b> can modify data
</div>

<!-- Table -->

<table class="table table-light table-striped mt-3 mb-3">
  <thead>
    <tr>
      <th *ngFor="let field of fields">{{ field.as }}</th>
      <!-- Active Field Header -->
      <th *ngIf="isActiveField">Is Active</th>
      <!-- Setting Field Header -->
      <th *ngIf="settingsField">Settings</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of item_list">
      <td *ngFor="let field of fields">
        <span *ngIf="!field.child">{{ item[field.field] }}</span>
        <span *ngIf="field.child">{{
          item[field.field][field.childName]
        }}</span>
      </td>

      <!-- Active Field Body -->
      <td *ngIf="isActiveField">
        {{ item.is_active
        }}<button
          class="btn btn-sm"
          (click)="updateStatus(item.id, item.is_active)"
        >
          <i class="bi bi-arrow-counterclockwise"></i>
        </button>
      </td>

      <!-- Setting Field Body -->
      <td *ngIf="settingsField">
        <button
          (click)="showFieldEditor(item)"
          class="btn btn-sm"
          data-bs-toggle="modal"
          data-bs-target="#editFieldsModal"
        >
          <i class="bi bi-pencil-square"></i>
        </button>
        <button
          (click)="askForDelete(item)"
          class="btn btn-danger btn-sm"
          type="button"
          data-bs-toggle="modal"
          data-bs-target="#deleteRowModal"
        >
          <i class="bi bi-x"></i>
        </button>
      </td>
    </tr>
  </tbody>
</table>
